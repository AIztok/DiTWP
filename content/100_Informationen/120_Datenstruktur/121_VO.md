---
title: 121_VO
draft: false
tags:
  - IFC
  - Python
  - CSV
  - JSON
---
![[Pasted image 20240527114212.png]]
# Grundkonzepte
## Classes

### Allgemein

Wir gehen auf das C in IFC ein. Industrial Foundation **Classes**.
Der Name entstand in den 90er und bezieht sich damals auf die Entwicklung von C++ Klassen, die zur . 

[Classes](https://de.wikipedia.org/wiki/Klasse_(Objektorientierung)) werden in [Objektorientierten Programmiersprachen](https://de.wikipedia.org/wiki/Liste_objektorientierter_Programmiersprachen) wie C++, Python, Visual Basic, Java und anderen verwendet. 
Wie der Name sagt, handelt es sich um die [Objektorientierte Programmierung](https://de.wikipedia.org/wiki/Objektorientierte_Programmierung). 
Objektorientiertes Programmieren ist ein Programmierstil wo Objekte verwendet werden, diese können Informationen oder auch Funktionen enthalten.

In Objektorientierten Programmiersprachen werden oft Klassen verwendet.
Die Klasse kann als ein Konstruktionsplan für ein Objekt verstanden werden.
Wie im Beispiel aus der Übungseinheit dargestellt (siehe hier [[122_UE]]) kann die Klasse "Wand" vorgeben, dass jedes Objekt Wand einen Namen haben muss, ein Material aus der die Wand hergestellt ist und eine Wanddicke.

Das ist natürlich im Bezug zu den Klassen im IFC sehr vereinfacht, wo die Klassen verschachtelt sind und es viele Ebenen gibt, aber es zeigt warum es sinnvoll war und ist den Standard zum Informationsaustausch in der AEC Branche auf dem Prinzip der Objektorientierten Programmierung aufzubauen. 

Mehr zu IFC und den Klassen ist hier zu finden: [[134_IFC]].

### Beispiel

Es wird anhand der objektorientierten Programmiersprache Python gezeigt, wie eine Klasse erstellt wird.

Wesentliche was aus dem Beispiel mitzunehmen ist, um das Verständnis wie diverse Programme die wir nutzen funktionieren bzw. was im Hintergrund passiert, zu erlangen.

Das Programme mit denen "BIM Modelle" erstellt werden, arbeiten Objektorientiert - heißt die Klassen sind in der Software implementiert. 
In vereinfachter Weise unten wird eine Klasse Wand, die die Attribute:
- Name
- Material
- Dicke (Width)
und Funktionen:
- wenn ich eine Wand erstellt, soll gemeldet werden die wurde erstellt
- oder wenn gerufen sage welches Material hat die Wand
hinterlegt hat.

```python
class Wand:
  # Attribute
  def __init__(ObjWand, name, material, width):
    ObjWand.name = name
    ObjWand.material = material
    ObjWand.width = width
  #
  def __str__(ObjWand):
    return f"{ObjWand.name}"
  # Funktionen
  def myfunc(ObjWand):
    print("Wand " + ObjWand.name + " wurde erstellt")
  def myfunc2(ObjWand):
    print("Diese Wand ist aus " + ObjWand.material)
```

Wenn der Benutzer dann auswählt z.B. eine Wand zu erstellen, ist es vorgeschrieben welche Attribute kann oder soll diese Wand haben.
Beispielhaft wir erstellen eine neue Wand, den den Namen "W001" hat, eine KLH Wand ist und 0,2m dick:

```python
w1 = Wand("W001", "KLH", 0.2)

print(w1.name)
print(w1.material)
print(w1.width)
w1.myfunc()
w1.myfunc2()
```

Mit den Python-Befehlen `print` bzw. abrufen der Funktionen bekommen wir die Daten:

```
W001 
KLH 
0.2 
Wand W001 wurde erstellt 
Diese Wand ist aus KLH
```

Auf das Beispiel kann über Google Colab (Google account erforderlich):
https://colab.research.google.com/drive/1Ud6sKS4iXEcFL1GoGHWytFk_07yKJ_AT?usp=sharing
oder Binder (kein Account erforderlich) zugegriffen werden:


Sowohl auf Google Colab und Binder ist es möglich den Code zu ändern, selber zu probieren usw.
Mehr zu Jupyter Notebooks, Google Colab und Binder ist hier zu finden [[324_Jupyter & GoogleColab & Binder]].

Das obere Beispiel ist sehr vereinfacht zu was in den gängigen Programme passiert, aber es soll das Konzept Classes, dass die Grundlage von IFC ist, aufzeigen. 

Mehr zu Python und Classes ist hier zu finden:
	In English:
	https://www.w3schools.com/python/python_classes.asp
	In Deutsch:
	https://studyflix.de/informatik/python-class-3549


# Datenstrukture
## Datenstruktur CSV

Springe zu [[133_CSV&XLSX]].

## Datenstruktur JSON

Allgemeine Infos zu JSON Format sind hier zu finden [[132_JSON]].
Wir werden ein einfaches Beispiel einer ifcjson Datei zeigen und wie die Daten abgefragt werden können:

[GoogleColab/Json Beispiel](https://colab.research.google.com/drive/14sUV5H4gAtNbcs190b6wNwWeFv-lGxOp?usp=sharing)

Anbei das Format einer JSON Datei:

```json
ifcjson_data = '''
{
  "type": "ifcJSON",
  "version": "2.0",
  "data": {
    "walls": [
      {
        "type": "IfcWallStandardCase",
        "GlobalId": "1",
        "Name": "Structural Wall 1",
        "Location": {
          "type": "IfcLocalPlacement",
          "PlacementRelTo": "2",
          "RelativePlacement": {
            "type": "IfcAxis2Placement3D",
            "Location": {"type": "IfcCartesianPoint", "Coordinates": [10, 20, 0]}
          }
        },
        "Width": 0.3,
        "Height": 3.0,
        "Material": "Concrete",
        "Properties": {
          "LoadBearing": true,
          "FireResistance": "REI120"
        }
      },
      {
        "type": "IfcWallStandardCase",
        "GlobalId": "2",
        "Name": "Structural Wall 2",
        "Location": {
          "type": "IfcLocalPlacement",
          "PlacementRelTo": "2",
          "RelativePlacement": {
            "type": "IfcAxis2Placement3D",
            "Location": {"type": "IfcCartesianPoint", "Coordinates": [15, 25, 0]}
          }
        },
        "Width": 0.25,
        "Height": 3.0,
        "Material": "Brick",
        "Properties": {
          "LoadBearing": false,
          "FireResistance": "EI60"
        }
      },
      {
        "type": "IfcWallStandardCase",
        "GlobalId": "3",
        "Name": "Partition Wall 1",
        "Location": {
          "type": "IfcLocalPlacement",
          "PlacementRelTo": "2",
          "RelativePlacement": {
            "type": "IfcAxis2Placement3D",
            "Location": {"type": "IfcCartesianPoint", "Coordinates": [20, 30, 0]}
          }
        },
        "Width": 0.15,
        "Height": 2.5,
        "Material": "Drywall",
        "Properties": {
          "LoadBearing": false,
          "FireResistance": "EI30"
        }
      }
    ]
  }
}
'''
```

Und wie z.B. mit Python relativ einfach die Eigenschaften ausgelesen werden können.

Hier wird eine Funktion `get_wall_property` zum Lesen der Daten definiert:

```python
# Parse die IFCJSON-Daten
ifc_data = json.loads(ifcjson_data)

# Funktion, um eine spezifische Eigenschaft für eine spezifische Wand anhand der GlobalId zu erhalten
def get_wall_property(ifc_data, global_id, property_name):
    # Durchlaufe alle Wände in den IFC-Daten
    for wall in ifc_data['data']['walls']:
        # Überprüfe, ob die aktuelle Wand die gesuchte GlobalId hat
        if wall['GlobalId'] == global_id:
            # Splitte den Eigenschaftsnamen in einzelne Schlüssel (für verschachtelte Eigenschaften)
            keys = property_name.split('.')
            value = wall
            # Durchlaufe die Schlüssel, um die verschachtelte Eigenschaft zu erreichen
            for key in keys:
                value = value.get(key)
                # Wenn der Schlüssel nicht existiert, gib None zurück
                if value is None:
                    return None
            # Gib den Wert der gesuchten Eigenschaft zurück
            return value
    # Wenn keine Wand mit der gesuchten GlobalId gefunden wurde, gib None zurück
    return None
```

Mit dieser Funktion ist es danach sehr einfach spezifische Daten aus der JSON Datei auszulesen:

```Python
# Beispiel: Hole das Material der Wand mit der GlobalId "2"

global_id = "2"

property_name = "Material"

material = get_wall_property(ifc_data, global_id, property_name)

print(f"Das Material der Wand {global_id} ist: {material}")
```

Ergebnis wäre:

```
Das Material der Wand 2 ist: Brick
```

## Datenstruktur Grasshopper

Die Datenstruktur in Grasshopper ist hier näher erläutert:  [[013_Grasshopper#Datenstruktur]]

Die Typen werden anhand eines Beispiels erläutert, die Grasshopper Datei kann [hier heruntergeladen werden](https://github.com/AIztok/DiTWP_Data/blob/main/121_VO/DiTWP_GH_Datenstruktur_v00.gh).

Unten ein Auszug aus dem Beispiel, in dem Beispiel wird noch die Möglichkeit der Manipulation mit Datenbäumen bzw. einzelnen Zweigen gezeigt.

![[Pasted image 20240706224305.png]]

![[Pasted image 20240706230417.png]]

![[Pasted image 20240706230633.png]]
## Datenstruktur IFC

Springe zu [[134_IFC]].

[Graph Visualisation of IFC Files](https://ifc-graph.streamlit.app/)

## Datenstruktur SAF

Springe zu [[135_SAF]].


